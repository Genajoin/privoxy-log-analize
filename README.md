# Privoxy log analize

Privoxy Log Analyzer - инструмент для анализа логов прокси сервера Privoxy с целью подсчета количества и частоты запросов к anthropic.com.

## Архитектура

Проект состоит из одного основного класса `PrivoxyLogAnalyzer`, который:
- Подключается к удаленному серверу по SSH (10.1.1.1)
- Скачивает лог файл `/var/log/privoxy.log`
- Парсит логи с помощью регулярных выражений
- Сохраняет данные по дням в JSON файлы в папке `data/`
- Генерирует отчеты в формате Markdown

## Основные команды

```bash
# Установка зависимостей
pip install -r requirements.txt

# Запуск анализа с параметрами по умолчанию
python main.py

# Запуск с кастомными параметрами
python main.py --host 10.1.1.1 --user root --log-path /var/log/privoxy.log --data-dir data
```

## Формат логов

Программа ожидает логи в формате:
```
2025-06-11 01:15:08.125 7fac9c9b20 Request: api.anthropic.com:443/
```

## Структура данных

- `data/YYYY-MM-DD.json` - файлы с данными по дням
- `data/report.md` - сводный отчет
- Неполный текущий день перезаписывается при каждом запуске
- Полные дни не перезаписываются для сохранения истории

## SSH подключение

Требуется доступ по SSH к серверу с Privoxy (по умолчанию root@10.1.1.1).
Программа использует библиотеку paramiko для SSH соединения.

Проект для анализа лог файла прокси сервера Privoxy
Цель - посчиать количество и частоту запросов к anthropic.com
логи доступны на роутере в виде
```
root@OpenWrt:~# tail -f /var/log/privoxy.log 
2025-06-11 01:15:08.125 7fac9c9b20 Request: api.anthropic.com:443/
2025-06-11 01:19:22.213 7fac9f7b20 Request: api.anthropic.com:443/
2025-06-11 01:19:28.333 7fac9ceb20 Request: api.anthropic.com:443/
```
