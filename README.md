# Privoxy Log Analyzer

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤ –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä–∞ Privoxy —Å —Ü–µ–ª—å—é –ø–æ–¥—Å—á–µ—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ anthropic.com. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É –æ—Ç—á–µ—Ç–æ–≤ –Ω–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ –∑–∞–ø—É—Å–∫ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É —Å –ª–æ–≥–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –ª–æ–≥–æ–≤ Privoxy
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –¥–Ω—è–º –∏ —á–∞—Å–∞–º
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ HTML –æ—Ç—á–µ—Ç–æ–≤ —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ .env –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ cron
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ conda –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫
./run.sh

# –ò–ª–∏ —Ä—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
conda env create -f environment.yml
conda activate privoxy-log-analyzer
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
nano .env
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ cron
./setup_cron.sh
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É —á–µ—Ä–µ–∑ —Ñ–∞–π–ª `.env`:

```bash
# SSH –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ —Å –ª–æ–≥–∞–º–∏
PRIVOXY_SSH_HOST=192.168.1.1
PRIVOXY_SSH_USER=root
PRIVOXY_LOG_PATH=/var/log/privoxy.log

# –õ–æ–∫–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
PRIVOXY_DATA_DIR=data

# –í–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç—á–µ—Ç–æ–≤
PRIVOXY_UPLOAD_HOST=your-server.com
PRIVOXY_UPLOAD_USER=your_username
PRIVOXY_UPLOAD_PATH=~/public_html/reports
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å—Ç–æ–π –∞–Ω–∞–ª–∏–∑ –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏
./run.sh

# –ê–Ω–∞–ª–∏–∑ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
./run.sh --upload --upload-user your_username

# –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ Python —Å–∫—Ä–∏–ø—Ç–∞
python main.py --help
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∏
export PRIVOXY_UPLOAD_USER=your_username
./run.sh

# –ò–ª–∏ —á–µ—Ä–µ–∑ .env —Ñ–∞–π–ª (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
echo "PRIVOXY_UPLOAD_USER=your_username" >> .env
./run.sh
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ `PrivoxyLogAnalyzer`, –∫–æ—Ç–æ—Ä—ã–π:
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH
- –°–∫–∞—á–∏–≤–∞–µ—Ç –ª–æ–≥ —Ñ–∞–π–ª `/var/log/privoxy.log`
- –ü–∞—Ä—Å–∏—Ç –ª–æ–≥–∏ —Å –ø–æ–º–æ—â—å—é —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –¥–Ω—è–º –≤ JSON —Ñ–∞–π–ª—ã
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö Markdown –∏ HTML
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –æ—Ç—á–µ—Ç—ã –Ω–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ SFTP

## –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –æ–∂–∏–¥–∞–µ—Ç –ª–æ–≥–∏ Privoxy –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
```
2025-06-11 01:15:08.125 7fac9c9b20 Request: api.anthropic.com:443/
2025-06-11 01:19:22.213 7fac9f7b20 Request: api.anthropic.com:443/
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ main.py              # –û—Å–Ω–æ–≤–Ω–æ–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
‚îú‚îÄ‚îÄ run.sh               # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ setup_cron.sh        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ environment.yml      # Conda –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ requirements.txt     # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example         # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ data/               # –î–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏–∑–∞
‚îÇ   ‚îú‚îÄ‚îÄ YYYY-MM-DD.json # –î–∞–Ω–Ω—ã–µ –ø–æ –¥–Ω—è–º
‚îÇ   ‚îú‚îÄ‚îÄ report.md       # Markdown –æ—Ç—á–µ—Ç
‚îÇ   ‚îî‚îÄ‚îÄ report.html     # HTML –æ—Ç—á–µ—Ç
‚îî‚îÄ‚îÄ logs/               # –õ–æ–≥–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã
    ‚îî‚îÄ‚îÄ privoxy_analyzer.log
```

## –í–µ–±-–æ—Ç—á–µ—Ç—ã

HTML –æ—Ç—á–µ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- üîÑ –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
- üìÖ –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–æ–≤—ã–µ –¥–∞—Ç—ã –≤–≤–µ—Ä—Ö—É
- üìä –°–æ–¥–µ—Ä–∂–∞—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- üé® –ò–º–µ—é—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- ‚è∞ –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã cron:
- –ö–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
- –ö–∞–∂–¥—ã–π —á–∞—Å  
- –ö–∞–∂–¥—ã–µ 4 —á–∞—Å–∞
- –ö–∞–∂–¥—ã–µ 12 —á–∞—Å–æ–≤
- –û–¥–∏–Ω —Ä–∞–∑ –≤ –¥–µ–Ω—å
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∞–º–∏:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ 10MB
- –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- Python 3.11+
- paramiko (SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
- pathlib (—Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏)
- Conda –∏–ª–∏ pip –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–∫–µ—Ç–∞–º–∏

## SSH –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü—Ä–æ–≥—Ä–∞–º–º–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –ø–æ SSH –∫–ª—é—á–∞–º –∫:
1. **–°–µ—Ä–≤–µ—Ä—É —Å –ª–æ–≥–∞–º–∏ Privoxy** (–¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –ª–æ–≥–æ–≤)
2. **–í–µ–±-—Å–µ—Ä–≤–µ—Ä—É** (–¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç—á–µ—Ç–æ–≤, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –±–µ—Å–ø–∞—Ä–æ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –ø–æ SSH –∫–ª—é—á–∞–º.
